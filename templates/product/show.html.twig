{% extends 'base.html.twig' %}

{% block title %}Product{% endblock %}

{% block body %}
    <h1>Product</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>IsValid</th>
                <td>{{ product.isValid ? 'Yes' : 'No' }}</td>
            </tr>
            <tr>
                <th>IsPayed</th>
                <td>{{ product.isPayed ? 'Yes' : 'No' }}</td>
            </tr>
            <tr>
                <th>Comment</th>
                <td>{{ product.comment }}</td>
            </tr>
            <tr>
                <th>Fichiers</th>
                {% for file in product.files %}
                    <th><a href="{{ path('app_userspace_downloadfile', {'file' : file.id, 'product': product.id }) }}">{{ file.name }}</a></th>
                {% else %}
                    <th>Pas de fichiers</th>
                {% endfor %}
            </tr>
        </tbody>
    </table>

    {% if product.bill is not null %}
        <a href="{{ path('app_userspace_downloadbill', {'product' : product.id, 'bill' : product.bill.id}) }}">Facture</a>
    {% endif %}
    {% if product.devis is not null %}
        <a href="{{ path('app_userspace_downloaddevis', {'product' : product.id, 'devis' : product.devis.id}) }}">Devis</a>
    {% endif %}

    {% if is_granted("ROLE_ADMIN") %}
        <a href="{{ path('app_adminspace_uploaddevis', {'product': product.id}) }}">Ajouter un devis</a>
        <a href="{{ path('app_adminspace_uploadbill', {'product': product.id}) }}">Ajouter une facture</a>

        <a href="{{ path('app_adminspace_products') }}">back to list</a>
    {% endif %}

    {% if not is_granted("ROLE_ADMIN") %}
        {{ include('product/_delete_form.html.twig') }}
    {% endif %}
{% endblock %}
